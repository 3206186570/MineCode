<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            list-style: none;
            box-sizing: border-box;
            color: #fff;
        }

        html,
        body {
            width: 100%;
            height: 100%;
        }

        .main {
            width: 100%;
            height: 100%;
            padding: 30px;
            background-image: url(./xing.jpg);
        }

        h3 {
            text-align: center;
        }

        .times {
            text-align: right;
            margin: 30px 0;
            display: flex;
            justify-content: flex-end;
        }

        .box {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .left {
            width: 40%;
        }

        .right {
            width: 40%;
        }

        .content {
            margin: 120px 0;
            display: flex;
        }

        #orderName {
            font-size: 20px;
            background-image: linear-gradient(to right, red, orange, yellow, green, blue, indigo, violet);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
        }

        ul {
            display: flex;
        }

        li {
            margin: 0 10px;
            background: #7ec050;
            width: 80px;
            height: 30px;
            text-align: center;
            line-height: 30px;
            color: #fff;
            font-size: 12px;
            border-radius: 15px;
        }

        #getName {
            display: flex;
            flex-wrap: wrap;
            justify-content: space-around;
            align-items: center;
        }

        #getName p {
            flex-shrink: 0;
            margin: 20px;
        }
    </style>
</head>

<body>
    <div class="main">
        <h3>H2110C点名表</h3>
        <div class="times">
            时间：
            <p class="time" id="getMoveTime"></p>
        </div>
        <div class="box">
            <div class="left">
                <div id="getName"></div>
            </div>
            <div class="right">
                <div class="content">
                    天选之人：
                    <p id="orderName"></p>
                </div>
                <ul>
                    <li id="onlyOne">单人点名</li>
                    <li id="doubelorder">双人点名</li>
                    <li id="nan">男生点名</li>
                    <li id="nv">女生点名</li>
                </ul>
            </div>
        </div>
    </div>
</body>
<script>
    //获取时间的dom元素
    let moveTime = document.getElementById('getMoveTime')

    function dataTime(value) {
        let year = value.getFullYear().toString().padStart(4, '0')
        let month = (value.getMonth() + 1).toString().padStart(2, '0')
        let dates = value.getDate().toString().padStart(2, '0')
        let hour = value.getHours().toString().padStart(2, '0')
        let minutes = value.getMinutes().toString().padStart(2, '0')
        let seconds = value.getSeconds().toString().padStart(2, '0')
        return year + '-' + month + '-' + dates + '  ' + hour + ':' + minutes + ':' + seconds
    }
    function dataTimes() {
        var nowTime = new Date()
        getMoveTime.textContent = dataTime(nowTime)
    }
    setInterval(() => {
        dataTimes()
    }, 1000)




    //名单
    let finishData = []
    let orderList = [
        { name: '李林桂', sex: '男' },
        { name: '雷蕾', sex: '女' },
        { name: '高甜媛', sex: '女' },
        { name: '王蕊雯', sex: '女' },
        { name: '于勤元', sex: '男' },
        { name: '闫冬', sex: '男' },
        { name: '周韬玮', sex: '男' },
        { name: '霍利鹏', sex: '男' },
        { name: '皇甫幼旺', sex: '男' },
        { name: '王冉冉', sex: '女' },
        { name: '梁婧雯', sex: '女' },
        { name: '闫丽娜', sex: '女' },
        { name: '尚校帆', sex: '男' },
        { name: '余永涛', sex: '男' },
        { name: '王炳兆', sex: '男' },
        { name: '曹梦楠', sex: '男' },
        { name: '井晓智', sex: '男' },
        { name: '王晓行', sex: '男' },
        { name: '张家恺', sex: '男' },
        { name: '阿仕杰', sex: '男' },
        { name: '赵泉', sex: '男' },
        { name: '许博雅', sex: '男' },
        { name: '袁玉博', sex: '男' },
        { name: '吴国涛', sex: '男' },
        { name: '岳辉', sex: '男' },
        { name: '郭慧敏', sex: '女' },
        { name: '李诗筠', sex: '女' },

    ]
    //随机名单名字的颜色
    function getGradient() {
        let color1 = getRandomColor()
        let color2 = getRandomColor()
        let color3 = getRandomColor()
        return `linear-gradient(to right, ${color1} , ${color2} ,${color3})`
    }
    let getName = document.getElementById('getName')
    function getDate() {
        setInterval(() => {
            getName.style.backgroundImage = getGradient()
            getName.style.webkitBackgroundClip = "text"
            getName.style.backgroundClip = "text"
            getName.style.color = "transparent"
        }, 200);
    }
    function getRandomColor() {
        let r = Math.floor(Math.random() * 256)
        let g = Math.floor(Math.random() * 256)
        let b = Math.floor(Math.random() * 256)
        return `rgb(${r},${g},${b})`
    }

    //创建一个p节点
    let orderarr = orderList.map(function (item) {
        let p = document.createElement('p')
        p.style.backgroundImage = getGradient()
        p.style.webkitBackgroundClip = "text"
        p.style.backgroundClip = "text"
        p.style.color = "transparent"
        p.textContent = item.name
        return p
    })
    orderarr.forEach(function (item) {
        getName.appendChild(item)
    })




    //单人点名
    //获取dom元素
    let onlyName = document.getElementById('onlyOne')
    let orderName = document.getElementById('orderName')
    //随机产生一个名字
    let index = null
    function getRandomName() {
        index = Math.floor(Math.random() * orderList.length)
        orderName.textContent = orderList[index].name
    }
    //定义一个状态
    let isScrol = false
    let timer = null
    onlyName.addEventListener('click', function () {
        if (isScrol) {
            clearInterval(timer)
            onlyName.textContent = '单人点名'
            if (orderList.length === 0) {
                orderList = finishData
            } else {
                let info = orderList[index]
                if (info == undefined) return
                finishData.unshift(info)
                console.log(finishData,'finish');
                orderList.splice(index, 1)
                console.log(orderList,'orderList');
            }
        } else {
            getDate()
            timer = setInterval(getRandomName, 100)
            onlyName.textContent = '暂停'
        }
        isScrol = !isScrol
    })






    //双人点名
    let doubelorder = document.getElementById('doubelorder')
    let index1 = null
    let index2 = null
    function doubelNameTwo() {
        let index1 = Math.floor(Math.random() * orderList.length)
        let index2 = Math.floor(Math.random() * orderList.length)
        if (index1 == index2) {
            index2 = Math.floor(Math.random() * orderList.length)
        }
        orderName.textContent = `${orderList[index1].name} ${orderList[index2].name} `
    }
    let time1 = null
    let isScrol1 = false 
    doubelorder.addEventListener('click', function () {
        console.log(11111);
        if (isScrol1) {
            clearInterval(time1)
            doubelorder.textContent = '双人点名'
        } else {
            time1 = setInterval(doubelNameTwo, 100)
            doubelorder.textContent = '暂停'
        }
        isScrol1 = !isScrol1
    })







    //男生
    let nanList = []
    let nan = document.getElementById('nan')
    function nanorder() {
        let index = Math.floor(Math.random() * nvList.length)
        orderName.textContent = nanList[index].name
    }
    orderList.forEach(function (item) {
        if (item.sex == '男') {
            nanList.push(item)
        }
    })

    let time3 = null
    nan.addEventListener('click', function () {
        if (isScrol) {
            clearInterval(time3)
            nan.textContent = '男生点名'
        } else {
            time3 = setInterval(nanorder, 100)
            nan.textContent = '暂停'
        }
        isScrol = !isScrol
    })





    //女生
    let nv = document.getElementById('nv')
    let nvList = []
    orderList.forEach(function (item) {
        if (item.sex == '女') {
            nvList.push(item)
        }
    })
    function nvorder() {
        let index = Math.floor(Math.random() * nvList.length)
        orderName.textContent = nvList[index].name
    }
    nv.addEventListener('click', function () {
        if (isScrol) {
            clearInterval(timer)
            nv.textContent = '女生点名'
        } else {
            timer = setInterval(nvorder, 100)
            nv.textContent = '暂停'
        }
        isScrol = !isScrol
    })



</script>

</html>